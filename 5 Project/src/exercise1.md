# Задание №1. MPA, SPA, PWA

```
Сайты построены по трём основным шаблонам:
- MPA - multi-page application - многостраничные приложения 
- SPA - single-page application - одностраничные приложения
- PWA  - progressive web application - прогрессивные приложения 
```

# ★ `SPA (Single Page Application)`
— это одностраничное приложение, содержащее HTML-страницу, которая динамически (без полной перезагрузки) обновляется в ответ на действия пользователя. 
- Архитектура приложения устроена так, что при первоначальном запуске посетитель видит основной контент сайта в браузере, а новые данные загружаются на ходу по мере необходимости, например, при прокрутке или клике на иконку. Cодержание страницы изменится, но шапка сайта (хедер) останется на своём месте.

| Преимущества | Недостатки  |
| ------ | ------ |
| высокая скорость подгрузки страницы в одну сессию, доп. быстрое обновление данных по запросу обновления (динамическая подгрузка) | не работает при отключении javascript, если пользователь не использует его в браузере для ускорения загрузки сайта без лишней рекламы |
| при переходе на новую страницу обновляется часть контента, позволяя не загружать одни и те же элементы сайта множество раз, экономия времени пользователя | плохо поддаются SEO (search engine optimization) оптимизации : URL не уникальные для каждой страницы, нет устойчивости структуры|
| легкость создания для разработки: есть готовые фреймворки и библиотеки, параллельная работа над frontend и backend + на основе готового кода можно сделать моб. приложение | сильная нагрузка на браузер, если тяжелый фреймворк (структура библиотеки проекта) |
| гибкость пользовательского интерфейса (проще сделать увлекательный и интерактивный дизайн) | идёт нагрузка на процессор и батарею устройства : вспомогательные библиотеки формируют кэш для работы, который нагружает и саму сеть |
| простое кэширование данных, входные - в 1 запрос, далее частично-оффлайн с подгрузкой изменений/сохранения, подключаясь к интернету  | дорогая разработка: усложнение общей логики и очень много кода для решения простых задач |
| веб-страница всего одна и проще хранить сведения о сеансе, управлять состояниями представлений и анимацией | невозможна обработка поступления новых данных при отсутствии интернета |

`~ Примеры ~`
Соцсети и сайты с большим количеством пользователей, ленты социальных сетей, почтовые сервисы:
```
- https://facebook.com
- https://pikabu.ru
- https://habr.com
- https://vk.com
- https://mail.ru
- https://mail.google.com/
```

# ★ `MPA (Multi Page Applications)` 
— это многостраничные приложения, работающие, как привычные нам веб-сайты. Они отправляют запрос на сервер и полностью обновляют страницу, когда с ней совершается какое-либо действие (переход на другую страницу, внесение и изменение данных). 
- Подобная архитектура приложения значительно влияет на производительность и скорость, поскольку большая часть данных подгружается повторно при каждом переходе. Сайт представляет собой главную страницу и множество ссылок на другие страницы.

| Преимущества | Недостатки  |
| ------ | ------ |
| простая SEO (поисковая оптимизация) т.к. сайтам важно попасть в топы поисковых систем : каждая страница имеет уникальный URL и стабильна, что позволяет поисковым ботам адекватно ее просканировать | низкая скорость разработки: тесная взаимосвязь frontend и backend усложняет работу разработчиков|
| масштабируемость : можно вложить много информации и данных, без ограничений по страницам и функциям | высокая стоимость разработки, требуются использования фреймворков на обеих сторонах: клиента и сервера|
| проверены временем : работают по тем же принципам, что и знакомые пользователю веб-сайты с классической навигацией | затратность в создании мобильного приложения т.к. плохо конвертируются и требуется разработка с нуля  |


`~ Примеры ~`
Интернет-магазины, сайты компаний, торговые площадки крупных компаний, предлагающие широкий спектр услуг и продуктов, где необходимо отображать большое количество контента:
```
- https://ebay.com
- https://amazon.com
- https://www.avito.ru/
- https://testit.software/
```

# ★ `Progressive Web Application (PWA)` 
— это технология в веб-разработке  ( Microsoft 2000г, Google Chrome 2015г), которая визуально и функционально трансформирует сайт в веб-приложение. Чтобы начать работу с PWA, пользователю необходимо скачать и установить сайт как приложение. Последующий доступ к сайту производится через иконку на рабочем столе пользователя. При нажатии сайт быстро открывается без посредника в виде браузера. 
- Архитектура будет полезна для часто обновляющихся сервисов, к которым будут постоянно возвращаются клиенты. Push-уведомления позволяют периодически привлекать внимание пользователей и стимулировать их на посещение приложения, увеличивая прибыль. 
- Как обычный сайт, Progressive Web Apps доступны по URL-адресам и индексируются в поисковиках. 
- Как мобильные приложения, они отправляют пользователям push-уведомления с новостями и предложениями. При этом такие приложения работают на всех известных браузерах и платформах, на любых гаджетах и ПК, онлайн и офлайн. 

| Преимущества | Недостатки  |
| ------ | ------ |
| кроссплатформенность и гибкость сокращает расходы на разработку : работают на всех платформах/устройствах, что избавляет от необходимости создавать версии продукта под каждую ОС или делать определенный выбор | отсутствие трафика из привычных пользователям магазинов приложений App Store и Google Play, которое есть при наличии нативного приложения |
| всегда под рукой у пользователя - сайт доступен по иконке в смартфоне даже в оффлайн режиме; чаще взаимодействие с целевой аудиторией : расширение каналов коммуникации с минимальными вложениями | ограниченная поддержка функций мобильного устройства с использованием текущих возможностей веб-браузера  |
| установка в 1 клик без переходов в маркет - предлагается при повторном заходе на сайт : основные компоненты приложения загружаются заранее - во время первого использования приложения - что существенно ускоряет инсталляцию и снижает количество отказов | сравнительно более высокий расход заряда батареи мобильного устройства отмечен у PWA, написанных на JavaScript, чем приложений, написанные на нативных языках (Android - Kotlin или iOS - Swift) |
| отсутствие ограничений сторов : не подконтрольны магазинам приложений и не обязаны соответствовать их требованиям в отличие от мобильных версий + лёгкость : занимают гораздо меньше места по сравнению с нативными приложениями|  на данный момент низкая совместимость с iOS много проблем на iOS (Face ID, Touch ID, Bluetooth и информации о заряде батареи) |
| высокая производительность : работают быстрее мобильных приложений из-за эффективного кэширования данных | *по некоторым данным - производительность кастомных (нативных и кроссплатформенных) приложений выше, чем у PWA |
| есть доступ к функциям устройства (камера, микрофон, Bluetooth или местоположение GPS) - для владельцев сайтов  электронной коммерции полезно отправление push-уведомлений, как в приложении | не все устройства и не все ОС поддерживают полный набор возможностей PWA  |
| удобно для SEO : быстрая загрузка играет большую роль в позиции веб-сайта в мобильной поисковой системе; индексируется ботами поисковых систем | работу PWA может ограничивать неполный доступ к аппаратным компонентам |



`~ Примеры ~`
Крупные компании, предлагающие услуги и продукты, имеющие пользовательскую и клиентскую базу. Часто используют банки, маркетплейсы и интернет-магазины, образовательные порталы с курсами, СМИ и новостные порталы, рестораны с доставкой еды и вызов такси:
```
- https://aliexpress.ru/
- https://www.sberbank.ru/ 
- https://www.wildberries.ru/
- https://www.ozon.ru/
- https://www.lamoda.ru/
- https://www.delivery-club.ru/
- https://sbermarket.ru/
- https://www.aviasales.ru/
- https://taxi.yandex.ru/ru_ru/
```

# Ответы на вопросы:

## Зачем вообще нужны PWA? Почему нельзя ограничиться SPA или MPA?
У каждого подхода к построению веб-сайта есть свои достоинства и недостатки. Традиционные веб-приложения MPA просты и надежны, легко считываются поисковыми ботами и привычны пользователю, но разрабатывать их дороже и дольше. SPA приложения работают быстрее и проще в разработке, приятнее пользователю по использованию UX (User Experience), однако SEO-оптимизацию для них настраивать гораздо сложнее, также идёт высокая нагрузка на браузер и устройство.

PWA это следующий этап для веб-приложений, который обладает расширенными функциями, как у установленных программ, но работает в браузере: 
- кроссплатформен : работает на всех устройствах;
- поддерживает работу даже без интернета; 
- индексируется поисковиками (+  SEO); 
- не требует от пользователя самостоятельной установки обновлений; 
- позволяет отправлять пуш-уведомления и работает с функциями телефона (геолокация, камера, микрофон); 
- дешевле в разработке и поддержке, чем мобильные приложения; 
- быстрее чем сайт и меньше мобильного приложения по размеру;

т.о. PWA cочетает наиболее эффективные возможности мобильных и веб-приложений и значительно улучшает взаимодействие с пользователями, повышая уровень лояльности и удовлетворённость. 
Основные показатели: надежность, быстрота, привлекательность. 

## Какие технологии используются для реализации PWA?
*Технологии для создания Progressive Web Application*:
- **Service Worker**  - прокси-сервер, который управляет сетевым запросом от приложения и даёт возможность кэширования, отвечает за фоновую синхронизацию, настройку push-уведомлений и автономные функции, запуска браузера в фоновом режиме. Представляет собой javascript файл, подключаемый в html коде страницы, где разработчик определяет логику работы с приходящими из фронтэнда запросами и другую функциональность.  
- **HTTPS-протокол**  при передаче данных и всех ресурсов сайта - необходимое требование для PWA. Наличие SSL (Secure Sockets Layer) сертификата позволяет использовать надежное зашифрованное соединение. 
- **Application Shell** (оболочка приложения)  - это статический шаблон графического интерфейса без контента и динамической информации. Такой скелет необходим для быстрой загрузки с клиента при запуске приложения.
- **Web App manifest** - это {JSON} файл, декларативно определяющий для браузера название приложения, его иконку, как будет выглядеть PWA и некоторые другие заданные параметры. Позволяет «установить» PWA как отдельное приложение на главный экран смартфона.
- **Push Notifications** - это короткие всплывающие сообщения, которые веб-ресурс рассылает своим подписчикам на ПК и мобильные устройства для доставки релевантной информации и поддержания вовлеченности. Полезно для e-commerce в бизнесе.


## Как можно понять (и можно ли), что перед нами PWA, а не другие виды приложений?
Да, можно проверить соответствие требованиям к PWA : наличие и поддержка особых технологий Service Worker, SSL сертификат для передачи данных по протоколу HTTPS, Web app manifest, App shell (см. выше ⮵). Легкие обновления загружаются разработчиками и предоставляются при заходе на сайт, пользователю не нужно скачивать их самостоятельно из магазина приложений или искать apk-файл. Доп. работоспособность как у нативного приложения, из-за которой можно спутать : наличие push-уведомлений, добавление иконки на главный экран, возможность работы в оффлайн режиме без интернета 

## Чем отличается между собой тестирование SPA и MPA?
```
- разница в загрузке первой и последующих страниц
- разные или одинаковые URL
- различный интерфейс и навигация в нём
- разная структура и расположение отдельных компонентов
- загрузка при различных скоростях соединения
- разные условия производительности устройства
- нагрузка по кол-ву отображаемого контента
- возможность работы оффлайн/онлайн
```

#
**Таблица сравнения Single Page Application (SPA) &  (MPA) Multi Page Application**

|фактор | SPA | MPA |
| -- | :-: | :-: |
|разработка: | простая | низкая скорость  |
|интерфейс:| гибкий  | стандартный сайта |
|данные| простое хранение : данные выгружаются в 1 запрос в кэш, остальные обновления дополняются | высокая масштабируемость : много информации без ограничений по страницам и функциям |
|поисковая оптимизация| сложности с SEO  | простая |
|ссылки на страницы| ссылка-запрос, а не переход; отображение новых данных на той же странице  URL | ссылка-переход; уникальные для каждой страницы и стабильные по записи URL |
|загрузка страниц | динамическая подгрузка обновлений в той же странице | страница полностью перезагружается при переходе |
|стоимость разработки| цена зависит от сложности | высокая |
|процесс разработки| backend и frontend  разделены, компоненты кода могут быть использованы повторно | взаимосвязь и тесная зависимость |
|необходим JavaScript?| да, в при отсутствии функции в браузере могут быть проблемы с первоначальной загрузкой страницы | зависимости работы от JavaScript нет |	
|рендеринг (чаще всего используется):| CSR - клиентский {JSON| CSR - серверный <HTML |
|цель при создании рассчитана на:| соцсети, комфортную браузерную работу в реальном времени *+ взаимодействие с кэшем старых данных без интернета| предоставление информации пользователю без его активного взаимодействия (чтение данных, статичный каталог, надежный интернет-магазин)  |
||  |     |
|* схема| (сервер) - переход - |  (сервер) - переход =  |
|* работы|  - /page_url (браузер) |   ⮱ - /page_url1  (браузер) |
|* Page Application|  SAME URL UPDATED |   ⮱ - /page_url2  (браузер) |

#

**Таблица сравнения PWA/сайты/приложение**

|функция :| Progressive Web Application  | веб-сайт (SPA&MPA)| мобильное приложение |
| -- | :-: | :-: | :-: |
|работа offline| ✓  | ✓/✘ | ✓ |
|push-уведомления | ✓  | ✘ | ✓ |
|установка на главный экран| ✓  | ✘ | ✓ |
|индексируется поисковиками (SEO)| ✓  | ✘/✓  | ✘  |
|работает на всех устройствах и ОС| ✓  | ✓  | ✘ |
|не требует установки и обновлений| ✓  | ✓  | ✘ |

#
## Как тестировать PWA?
При тестировании важно обратить внимание на:
- наличие обслуживания по HHTPS и SSL сертификата
- удостовериться, что происходит обработка протоколов манифеста
- быстроту работы интерфейса и отклик системы
- проведение проверок с разных устройств и ОС
- адаптацию UI (User Interface) к экрану устройства
- автономную работу при отсутствии интернета
- push-уведомления: принятие/отказ, содержание и частота, момент всплытия
- добавление иконки на домашнюю страницу устройства
- совместимость со всеми браузерами и их версиями
